<Window x:Class="PingPad.Views.StickyNoteWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PingPad" Height="360" Width="340"
        WindowStyle="None" ResizeMode="CanResizeWithGrip"
        AllowsTransparency="True" Background="Transparent"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <!-- Icon and modern styles -->
        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#20FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernToggleButton" TargetType="ToggleButton">
            <Setter Property="Background" Value="#FFEFEFEF"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="6,3"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" Value="#FF0078D7"/>
                                <Setter Property="Foreground" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FFDDDDDD"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border x:Name="RootBorder" CornerRadius="10" Padding="8" BorderThickness="1"
            BorderBrush="#22000000" Background="#FFFFF1A8">
        <DockPanel LastChildFill="True">
            <!-- Header -->
            <Grid DockPanel.Dock="Top" Height="44" Margin="0,0,0,6">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Title field -->
                <Grid Grid.Column="0" VerticalAlignment="Center" Margin="4,4,4,0">
                    <TextBox x:Name="TitleTextBox"
                             FontWeight="Bold"
                             FontSize="14"
                             Foreground="#222"
                             BorderThickness="0"
                             Background="Transparent"
                             VerticalContentAlignment="Center"
                             Padding="4,2,4,2"
                             TextChanged="TitleTextBox_TextChanged"/>
                    <TextBlock x:Name="TitlePlaceholder"
                               Text="Title..."
                               Foreground="#888"
                               FontWeight="Bold"
                               FontSize="14"
                               VerticalAlignment="Center"
                               Margin="6,0,0,0"
                               IsHitTestVisible="False"/>
                </Grid>

                <!-- Toolbar -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                    <Button x:Name="BtnNew" Click="BtnNew_Click" Style="{StaticResource IconButton}" ToolTip="New" Margin="5,0">＋</Button>
                    <Button x:Name="BtnDelete" Click="BtnDelete_Click" Style="{StaticResource IconButton}" ToolTip="Delete" Margin="5,0">🗑</Button>
                    <ToggleButton x:Name="BtnBold" Click="BtnBold_Click" Style="{StaticResource ModernToggleButton}" ToolTip="Bold" Margin="5,0">B</ToggleButton>
                    <ToggleButton x:Name="BtnItalic" Click="BtnItalic_Click" Style="{StaticResource ModernToggleButton}" ToolTip="Italic" Margin="5,0">I</ToggleButton>
                    <Button x:Name="BtnUnderline" Click="BtnUnderline_Click" Style="{StaticResource IconButton}" ToolTip="Underline" Margin="5,0">
                        <TextBlock Text="U" TextDecorations="Underline" />
                    </Button>
                    <Button x:Name="BtnStrike" Click="BtnStrike_Click" Style="{StaticResource IconButton}" ToolTip="Strikethrough" Margin="5,0">S</Button>
                    <Button x:Name="BtnBullets" Click="BtnBullets_Click" Style="{StaticResource IconButton}" ToolTip="Bullets" Margin="5,0">•</Button>
                    <Button x:Name="BtnColor" Click="BtnColor_Click" Style="{StaticResource IconButton}" ToolTip="Color" Margin="5,0">◧</Button>
                    <Button x:Name="BtnReminder" Click="BtnReminder_Click" Style="{StaticResource IconButton}" ToolTip="Reminder" Margin="5,0">⏰</Button>
                    <Button x:Name="BtnClose" Click="BtnClose_Click" Style="{StaticResource IconButton}" ToolTip="Close" Margin="5,0">✕</Button>
                </StackPanel>
            </Grid>

            <!-- Color palette -->
            <Popup x:Name="PalettePopup" Placement="MousePoint" StaysOpen="False" AllowsTransparency="True">
                <Border Background="White" CornerRadius="8" Padding="8" BorderBrush="#22000000" BorderThickness="1">
                    <UniformGrid Columns="4">
                        <Button Tag="Yellow" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFFFF1A8" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="Pink" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFFFDDEB" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="Blue" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFDDEFFF" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="Green" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFE8F8E8" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="Purple" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFF3E6FF" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="Gray" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="#FFF2F2F2" RadiusX="4" RadiusY="4"/>
                        </Button>
                        <Button Tag="White" Click="ColorSwatch_Click" Width="40" Height="28" Margin="4">
                            <Rectangle Fill="White" RadiusX="4" RadiusY="4"/>
                        </Button>
                    </UniformGrid>
                </Border>
            </Popup>

            <!-- Note area -->
            <Grid>
                <RichTextBox x:Name="NoteBox"
                             BorderThickness="0"
                             Background="Transparent"
                             VerticalScrollBarVisibility="Auto"
                             AcceptsTab="True"
                             Padding="6"
                             GotFocus="NoteBox_GotFocus"
                             LostFocus="NoteBox_LostFocus"/>
                <TextBlock x:Name="NotePlaceholder"
                           Text="Type something..."
                           Foreground="#888"
                           Margin="10,8,0,0"
                           IsHitTestVisible="False"/>
            </Grid>
        </DockPanel>
    </Border>
</Window>
